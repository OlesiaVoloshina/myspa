{"ast":null,"code":"(function (global, factory) {\n  typeof exports === \"object\" && typeof module !== \"undefined\" ? factory(exports, require(\"react\"), require(\"@bloomreach/spa-sdk\")) : typeof define === \"function\" && define.amd ? define([\"exports\", \"react\", \"@bloomreach/spa-sdk\"], factory) : (global = typeof globalThis !== \"undefined\" ? globalThis : global || self, factory(global.BloomreachReactSdk = {}, global.React, global.BloomreachSpaSdk));\n})(this, function (exports, React, spaSdk) {\n  \"use strict\";\n\n  React = React && Object.prototype.hasOwnProperty.call(React, \"default\") ? React[\"default\"] : React;\n  /**\n  * The React Context holding the current brXM Component.\n  */\n\n  const BrComponentContext = React.createContext(undefined);\n\n  class BrMeta extends React.Component {\n    constructor() {\n      super(...arguments);\n      this.headRef = React.createRef();\n      this.tailRef = React.createRef();\n    }\n\n    componentDidMount() {\n      this.renderMeta();\n    }\n\n    componentDidUpdate(prevProps) {\n      prevProps.meta.clear();\n      this.renderMeta();\n    }\n\n    componentWillUnmount() {\n      this.props.meta.clear();\n    }\n\n    renderMeta() {\n      var _a, _b, _c;\n\n      const head = (_b = (_a = this.headRef) === null || _a === void 0 ? void 0 : _a.current) === null || _b === void 0 ? void 0 : _b.nextSibling;\n      const tail = (_c = this.tailRef) === null || _c === void 0 ? void 0 : _c.current;\n\n      if (!head || !tail) {\n        return;\n      }\n\n      this.props.meta.render(head, tail);\n    }\n\n    render() {\n      return React.createElement(React.Fragment, null, this.props.meta.length > 0 && React.createElement(\"span\", {\n        style: {\n          display: \"none\"\n        },\n        ref: this.headRef\n      }), this.props.children, this.props.meta.length > 0 && React.createElement(\"span\", {\n        style: {\n          display: \"none\"\n        },\n        ref: this.tailRef\n      }));\n    }\n\n  }\n  /**\n  * The React Context holding the current brXM Page.\n  */\n\n\n  const BrPageContext = React.createContext(undefined);\n  const BrMappingContext = React.createContext({});\n\n  class BrNodeComponent extends React.Component {\n    getMapping() {\n      return this.props.component.getName();\n    }\n\n    fallback() {\n      return this.props.children;\n    }\n\n    render() {\n      const mapping = this.getMapping();\n      const component = mapping && this.context[mapping];\n\n      if (!component) {\n        return this.fallback();\n      }\n\n      return React.createElement(component, this.props);\n    }\n\n  }\n\n  BrNodeComponent.contextType = BrMappingContext;\n\n  function BrContainerBox(props) {\n    return React.createElement(\"div\", {\n      className: props.page.isPreview() ? \"hst-container\" : undefined\n    }, React.Children.map(props.children, child => React.createElement(\"div\", {\n      className: props.page.isPreview() ? \"hst-container-item\" : undefined\n    }, child)));\n  }\n\n  function BrContainerInline(props) {\n    return React.createElement(\"div\", {\n      className: props.page.isPreview() ? \"hst-container\" : undefined\n    }, React.Children.map(props.children, child => React.createElement(\"span\", {\n      className: props.page.isPreview() ? \"hst-container-item\" : undefined\n    }, child)));\n  }\n\n  function BrContainerNoMarkup(props) {\n    return React.createElement(React.Fragment, null, props.children);\n  }\n\n  function BrContainerOrderedList(props) {\n    return React.createElement(\"ol\", {\n      className: props.page.isPreview() ? \"hst-container\" : undefined\n    }, React.Children.map(props.children, child => React.createElement(\"li\", {\n      className: props.page.isPreview() ? \"hst-container-item\" : undefined\n    }, child)));\n  }\n\n  function BrContainerUnorderedList(props) {\n    return React.createElement(\"ul\", {\n      className: props.page.isPreview() ? \"hst-container\" : undefined\n    }, React.Children.map(props.children, child => React.createElement(\"li\", {\n      className: props.page.isPreview() ? \"hst-container-item\" : undefined\n    }, child)));\n  }\n\n  function BrContainerItemUndefined(props) {\n    return React.createElement(React.Fragment, null, 'Component \"', props.component.getType(), '\" is not defined.');\n  }\n  /**\n  * The button component that opens for editing a content.\n  */\n\n\n  class BrManageContentButton extends React.Component {\n    render() {\n      var _a;\n\n      if (!((_a = this.context) === null || _a === void 0 ? void 0 : _a.isPreview())) {\n        return null;\n      }\n\n      return React.createElement(BrMeta, {\n        meta: this.props.content.getMeta()\n      });\n    }\n\n  }\n\n  BrManageContentButton.contextType = BrPageContext;\n  /**\n  * The button component that opens a menu editor.\n  */\n\n  class BrManageMenuButton extends React.Component {\n    render() {\n      var _a;\n\n      if (!((_a = this.context) === null || _a === void 0 ? void 0 : _a.isPreview())) {\n        return null;\n      }\n\n      const meta = spaSdk.isMenu(this.props.menu) ? this.props.menu.getMeta() : this.props.menu._meta && this.context.getMeta(this.props.menu._meta);\n      return meta ? React.createElement(BrMeta, {\n        meta\n      }) : null;\n    }\n\n  }\n\n  BrManageMenuButton.contextType = BrPageContext;\n\n  class BrNodeContainer extends BrNodeComponent {\n    getMapping() {\n      return this.props.component.getType();\n    }\n\n    fallback() {\n      switch (this.props.component.getType()) {\n        case spaSdk.TYPE_CONTAINER_INLINE:\n          return React.createElement(BrContainerInline, Object.assign({}, this.props));\n\n        case spaSdk.TYPE_CONTAINER_NO_MARKUP:\n          return React.createElement(BrContainerNoMarkup, Object.assign({}, this.props));\n\n        case spaSdk.TYPE_CONTAINER_ORDERED_LIST:\n          return React.createElement(BrContainerOrderedList, Object.assign({}, this.props));\n\n        case spaSdk.TYPE_CONTAINER_UNORDERED_LIST:\n          return React.createElement(BrContainerUnorderedList, Object.assign({}, this.props));\n\n        default:\n          return React.createElement(BrContainerBox, Object.assign({}, this.props));\n      }\n    }\n\n  }\n\n  class BrNodeContainerItem extends BrNodeComponent {\n    constructor(props) {\n      super(props);\n      this.onUpdate = this.onUpdate.bind(this);\n    }\n\n    componentDidMount() {\n      this.props.component.on(\"update\", this.onUpdate);\n    }\n\n    componentDidUpdate(prevProps) {\n      if (this.props.component !== prevProps.component) {\n        prevProps.component.off(\"update\", this.onUpdate);\n        this.props.component.on(\"update\", this.onUpdate);\n      }\n    }\n\n    componentWillUnmount() {\n      this.props.component.off(\"update\", this.onUpdate);\n    }\n\n    getMapping() {\n      return this.props.component.getType();\n    }\n\n    fallback() {\n      return React.createElement(BrContainerItemUndefined, Object.assign({}, this.props));\n    }\n\n    onUpdate() {\n      this.forceUpdate(() => this.props.page.sync());\n    }\n\n  }\n\n  class BrNode extends React.Component {\n    renderNode() {\n      if (React.Children.count(this.props.children)) {\n        return this.props.children;\n      }\n\n      const children = this.props.component.getChildren().map((child, index) => React.createElement(BrNode, {\n        key: index,\n        component: child\n      }));\n\n      if (spaSdk.isContainer(this.props.component)) {\n        return React.createElement(BrNodeContainer, {\n          component: this.props.component,\n          page: this.context\n        }, children);\n      }\n\n      if (spaSdk.isContainerItem(this.props.component)) {\n        return React.createElement(BrNodeContainerItem, {\n          component: this.props.component,\n          page: this.context\n        }, children);\n      }\n\n      return React.createElement(BrNodeComponent, {\n        component: this.props.component,\n        page: this.context\n      }, children);\n    }\n\n    render() {\n      return React.createElement(BrComponentContext.Provider, {\n        value: this.props.component\n      }, React.createElement(BrMeta, {\n        meta: this.props.component.getMeta()\n      }, this.renderNode()));\n    }\n\n  }\n\n  BrNode.contextType = BrPageContext;\n  /**\n  * The brXM component.\n  */\n\n  class BrComponent extends React.Component {\n    getComponents() {\n      if (!this.context) {\n        return [];\n      }\n\n      if (!this.props.path) {\n        return this.context.getChildren();\n      }\n\n      const component = this.context.getComponent(...this.props.path.split(\"/\"));\n      return component ? [component] : [];\n    }\n\n    renderComponents() {\n      return this.getComponents().map((component, index) => React.createElement(BrNode, {\n        key: index,\n        component\n      }, this.props.children));\n    }\n\n    render() {\n      return React.createElement(React.Fragment, null, this.renderComponents());\n    }\n\n  }\n\n  BrComponent.contextType = BrComponentContext;\n\n  function __awaiter(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n      return value instanceof P ? value : new P(function (resolve) {\n        resolve(value);\n      });\n    }\n\n    return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) {\n        try {\n          step(generator.next(value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n\n      function rejected(value) {\n        try {\n          step(generator[\"throw\"](value));\n        } catch (e) {\n          reject(e);\n        }\n      }\n\n      function step(result) {\n        result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n      }\n\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n  }\n  /**\n  * @typedef {Object} BrPageProps\n  * @property {Configuration} configuration The configuration of the SPA SDK.\n  * @property {Object} mapping The brXM and React components mapping.\n  * @property {Page | PageModel | undefined} page The pre-initialized page instance or prefetched page model.\n  * Mostly this property should be used to transfer state from the server-side to the client-side.\n  */\n\n  /**\n  * The brXM page.\n  */\n\n\n  class BrPage extends React.Component {\n    /**\n    * @param props {BrPageProps}\n    */\n    constructor(props) {\n      super(props);\n      this.state = {\n        page: props.page && spaSdk.initialize(props.configuration, props.page)\n      };\n    }\n\n    componentDidMount() {\n      var _a;\n\n      if (!this.props.page) {\n        this.initialize();\n      }\n\n      (_a = this.state.page) === null || _a === void 0 ? void 0 : _a.sync();\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n      if (this.props.configuration !== prevProps.configuration || this.props.page !== prevProps.page) {\n        this.destroy();\n        this.initialize(this.props.page === prevProps.page);\n      }\n\n      if (this.state.page !== prevState.page) {\n        this.forceUpdate(() => {\n          var _a;\n\n          return (_a = this.state.page) === null || _a === void 0 ? void 0 : _a.sync();\n        });\n      }\n    }\n\n    componentWillUnmount() {\n      this.destroy();\n    }\n\n    initialize(force = false) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const model = force ? undefined : this.props.page;\n\n        try {\n          this.setState({\n            page: model ? spaSdk.initialize(this.props.configuration, model) : yield spaSdk.initialize(this.props.configuration)\n          });\n        } catch (error) {\n          this.setState(() => {\n            throw error;\n          });\n        }\n      });\n    }\n\n    destroy() {\n      if (!this.state.page) {\n        return;\n      }\n\n      spaSdk.destroy(this.state.page);\n    }\n\n    render() {\n      if (!this.state.page) {\n        return null;\n      }\n\n      return React.createElement(BrPageContext.Provider, {\n        value: this.state.page\n      }, React.createElement(BrMappingContext.Provider, {\n        value: this.props.mapping\n      }, React.createElement(BrNode, {\n        component: this.state.page.getComponent()\n      }, this.props.children)));\n    }\n\n  }\n\n  exports.BrComponent = BrComponent;\n  exports.BrComponentContext = BrComponentContext;\n  exports.BrManageContentButton = BrManageContentButton;\n  exports.BrManageMenuButton = BrManageMenuButton;\n  exports.BrPage = BrPage;\n  exports.BrPageContext = BrPageContext;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n});","map":{"version":3,"sources":["../src/component/BrComponentContext.ts","../src/meta/BrMeta.tsx","../src/page/BrPageContext.ts","../src/component/BrMappingContext.ts","../src/component/BrNodeComponent.ts","../src/cms/BrContainerBox.tsx","../src/cms/BrContainerInline.tsx","../src/cms/BrContainerNoMarkup.tsx","../src/cms/BrContainerOrderedList.tsx","../src/cms/BrContainerUnorderedList.tsx","../src/cms/BrContainerItemUndefined.tsx","../src/cms/BrManageContentButton.tsx","../src/cms/BrManageMenuButton.tsx","../src/component/BrNodeContainer.tsx","../src/component/BrNodeContainerItem.tsx","../src/component/BrNode.tsx","../src/component/BrComponent.tsx","../src/page/BrPage.tsx"],"names":["BrComponentContext","React","createContext","undefined","[object Object]","BrMeta","Component","this","createRef","renderMeta","prevProps","meta","clear","props","head","headRef","current","nextSibling","tail","tailRef","render","length","style","display","ref","children","BrPageContext","BrMappingContext","BrNodeComponent","getMapping","component","getName","fallback","mapping","context","createElement","BrContainerBox","className","page","isPreview","Children","map","child","BrContainerInline","BrContainerNoMarkup","BrContainerOrderedList","BrContainerUnorderedList","BrContainerItemUndefined","getType","BrManageContentButton","content","getMeta","BrManageMenuButton","isMenu","menu","_meta","BrNodeContainer","TYPE_CONTAINER_INLINE","TYPE_CONTAINER_NO_MARKUP","TYPE_CONTAINER_ORDERED_LIST","TYPE_CONTAINER_UNORDERED_LIST","BrNodeContainerItem","super","onUpdate","bind","on","off","forceUpdate","sync","BrNode","count","getChildren","index","key","isContainer","isContainerItem","Provider","value","renderNode","BrComponent","path","getComponent","split","getComponents","renderComponents","BrPage","state","initialize","configuration","prevState","destroy","force","model","setState","error"],"mappings":"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","sourcesContent":["(function(global, factory) {\n    typeof exports === \"object\" && typeof module !== \"undefined\" ? factory(exports, require(\"react\"), require(\"@bloomreach/spa-sdk\")) : typeof define === \"function\" && define.amd ? define([ \"exports\", \"react\", \"@bloomreach/spa-sdk\" ], factory) : (global = typeof globalThis !== \"undefined\" ? globalThis : global || self, \n    factory(global.BloomreachReactSdk = {}, global.React, global.BloomreachSpaSdk));\n})(this, (function(exports, React, spaSdk) {\n    \"use strict\";\n    React = React && Object.prototype.hasOwnProperty.call(React, \"default\") ? React[\"default\"] : React;\n    /**\n   * The React Context holding the current brXM Component.\n   */    const BrComponentContext = React.createContext(undefined);\n    class BrMeta extends React.Component {\n        constructor() {\n            super(...arguments);\n            this.headRef = React.createRef();\n            this.tailRef = React.createRef();\n        }\n        componentDidMount() {\n            this.renderMeta();\n        }\n        componentDidUpdate(prevProps) {\n            prevProps.meta.clear();\n            this.renderMeta();\n        }\n        componentWillUnmount() {\n            this.props.meta.clear();\n        }\n        renderMeta() {\n            var _a, _b, _c;\n            const head = (_b = (_a = this.headRef) === null || _a === void 0 ? void 0 : _a.current) === null || _b === void 0 ? void 0 : _b.nextSibling;\n            const tail = (_c = this.tailRef) === null || _c === void 0 ? void 0 : _c.current;\n            if (!head || !tail) {\n                return;\n            }\n            this.props.meta.render(head, tail);\n        }\n        render() {\n            return React.createElement(React.Fragment, null, this.props.meta.length > 0 && React.createElement(\"span\", {\n                style: {\n                    display: \"none\"\n                },\n                ref: this.headRef\n            }), this.props.children, this.props.meta.length > 0 && React.createElement(\"span\", {\n                style: {\n                    display: \"none\"\n                },\n                ref: this.tailRef\n            }));\n        }\n    }\n    /**\n   * The React Context holding the current brXM Page.\n   */    const BrPageContext = React.createContext(undefined);\n    const BrMappingContext = React.createContext({});\n    class BrNodeComponent extends React.Component {\n        getMapping() {\n            return this.props.component.getName();\n        }\n        fallback() {\n            return this.props.children;\n        }\n        render() {\n            const mapping = this.getMapping();\n            const component = mapping && this.context[mapping];\n            if (!component) {\n                return this.fallback();\n            }\n            return React.createElement(component, this.props);\n        }\n    }\n    BrNodeComponent.contextType = BrMappingContext;\n    function BrContainerBox(props) {\n        return React.createElement(\"div\", {\n            className: props.page.isPreview() ? \"hst-container\" : undefined\n        }, React.Children.map(props.children, child => React.createElement(\"div\", {\n            className: props.page.isPreview() ? \"hst-container-item\" : undefined\n        }, child)));\n    }\n    function BrContainerInline(props) {\n        return React.createElement(\"div\", {\n            className: props.page.isPreview() ? \"hst-container\" : undefined\n        }, React.Children.map(props.children, child => React.createElement(\"span\", {\n            className: props.page.isPreview() ? \"hst-container-item\" : undefined\n        }, child)));\n    }\n    function BrContainerNoMarkup(props) {\n        return React.createElement(React.Fragment, null, props.children);\n    }\n    function BrContainerOrderedList(props) {\n        return React.createElement(\"ol\", {\n            className: props.page.isPreview() ? \"hst-container\" : undefined\n        }, React.Children.map(props.children, child => React.createElement(\"li\", {\n            className: props.page.isPreview() ? \"hst-container-item\" : undefined\n        }, child)));\n    }\n    function BrContainerUnorderedList(props) {\n        return React.createElement(\"ul\", {\n            className: props.page.isPreview() ? \"hst-container\" : undefined\n        }, React.Children.map(props.children, child => React.createElement(\"li\", {\n            className: props.page.isPreview() ? \"hst-container-item\" : undefined\n        }, child)));\n    }\n    function BrContainerItemUndefined(props) {\n        return React.createElement(React.Fragment, null, 'Component \"', props.component.getType(), '\" is not defined.');\n    }\n    /**\n   * The button component that opens for editing a content.\n   */    class BrManageContentButton extends React.Component {\n        render() {\n            var _a;\n            if (!((_a = this.context) === null || _a === void 0 ? void 0 : _a.isPreview())) {\n                return null;\n            }\n            return React.createElement(BrMeta, {\n                meta: this.props.content.getMeta()\n            });\n        }\n    }\n    BrManageContentButton.contextType = BrPageContext;\n    /**\n   * The button component that opens a menu editor.\n   */    class BrManageMenuButton extends React.Component {\n        render() {\n            var _a;\n            if (!((_a = this.context) === null || _a === void 0 ? void 0 : _a.isPreview())) {\n                return null;\n            }\n            const meta = spaSdk.isMenu(this.props.menu) ? this.props.menu.getMeta() : this.props.menu._meta && this.context.getMeta(this.props.menu._meta);\n            return meta ? React.createElement(BrMeta, {\n                meta\n            }) : null;\n        }\n    }\n    BrManageMenuButton.contextType = BrPageContext;\n    class BrNodeContainer extends BrNodeComponent {\n        getMapping() {\n            return this.props.component.getType();\n        }\n        fallback() {\n            switch (this.props.component.getType()) {\n              case spaSdk.TYPE_CONTAINER_INLINE:\n                return React.createElement(BrContainerInline, Object.assign({}, this.props));\n\n              case spaSdk.TYPE_CONTAINER_NO_MARKUP:\n                return React.createElement(BrContainerNoMarkup, Object.assign({}, this.props));\n\n              case spaSdk.TYPE_CONTAINER_ORDERED_LIST:\n                return React.createElement(BrContainerOrderedList, Object.assign({}, this.props));\n\n              case spaSdk.TYPE_CONTAINER_UNORDERED_LIST:\n                return React.createElement(BrContainerUnorderedList, Object.assign({}, this.props));\n\n              default:\n                return React.createElement(BrContainerBox, Object.assign({}, this.props));\n            }\n        }\n    }\n    class BrNodeContainerItem extends BrNodeComponent {\n        constructor(props) {\n            super(props);\n            this.onUpdate = this.onUpdate.bind(this);\n        }\n        componentDidMount() {\n            this.props.component.on(\"update\", this.onUpdate);\n        }\n        componentDidUpdate(prevProps) {\n            if (this.props.component !== prevProps.component) {\n                prevProps.component.off(\"update\", this.onUpdate);\n                this.props.component.on(\"update\", this.onUpdate);\n            }\n        }\n        componentWillUnmount() {\n            this.props.component.off(\"update\", this.onUpdate);\n        }\n        getMapping() {\n            return this.props.component.getType();\n        }\n        fallback() {\n            return React.createElement(BrContainerItemUndefined, Object.assign({}, this.props));\n        }\n        onUpdate() {\n            this.forceUpdate(() => this.props.page.sync());\n        }\n    }\n    class BrNode extends React.Component {\n        renderNode() {\n            if (React.Children.count(this.props.children)) {\n                return this.props.children;\n            }\n            const children = this.props.component.getChildren().map((child, index) => React.createElement(BrNode, {\n                key: index,\n                component: child\n            }));\n            if (spaSdk.isContainer(this.props.component)) {\n                return React.createElement(BrNodeContainer, {\n                    component: this.props.component,\n                    page: this.context\n                }, children);\n            }\n            if (spaSdk.isContainerItem(this.props.component)) {\n                return React.createElement(BrNodeContainerItem, {\n                    component: this.props.component,\n                    page: this.context\n                }, children);\n            }\n            return React.createElement(BrNodeComponent, {\n                component: this.props.component,\n                page: this.context\n            }, children);\n        }\n        render() {\n            return React.createElement(BrComponentContext.Provider, {\n                value: this.props.component\n            }, React.createElement(BrMeta, {\n                meta: this.props.component.getMeta()\n            }, this.renderNode()));\n        }\n    }\n    BrNode.contextType = BrPageContext;\n    /**\n   * The brXM component.\n   */    class BrComponent extends React.Component {\n        getComponents() {\n            if (!this.context) {\n                return [];\n            }\n            if (!this.props.path) {\n                return this.context.getChildren();\n            }\n            const component = this.context.getComponent(...this.props.path.split(\"/\"));\n            return component ? [ component ] : [];\n        }\n        renderComponents() {\n            return this.getComponents().map((component, index) => React.createElement(BrNode, {\n                key: index,\n                component\n            }, this.props.children));\n        }\n        render() {\n            return React.createElement(React.Fragment, null, this.renderComponents());\n        }\n    }\n    BrComponent.contextType = BrComponentContext;\n    function __awaiter(thisArg, _arguments, P, generator) {\n        function adopt(value) {\n            return value instanceof P ? value : new P((function(resolve) {\n                resolve(value);\n            }));\n        }\n        return new (P || (P = Promise))((function(resolve, reject) {\n            function fulfilled(value) {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function rejected(value) {\n                try {\n                    step(generator[\"throw\"](value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function step(result) {\n                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n            }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        }));\n    }\n    /**\n   * @typedef {Object} BrPageProps\n   * @property {Configuration} configuration The configuration of the SPA SDK.\n   * @property {Object} mapping The brXM and React components mapping.\n   * @property {Page | PageModel | undefined} page The pre-initialized page instance or prefetched page model.\n   * Mostly this property should be used to transfer state from the server-side to the client-side.\n   */\n    /**\n   * The brXM page.\n   */    class BrPage extends React.Component {\n        /**\n       * @param props {BrPageProps}\n       */\n        constructor(props) {\n            super(props);\n            this.state = {\n                page: props.page && spaSdk.initialize(props.configuration, props.page)\n            };\n        }\n        componentDidMount() {\n            var _a;\n            if (!this.props.page) {\n                this.initialize();\n            }\n            (_a = this.state.page) === null || _a === void 0 ? void 0 : _a.sync();\n        }\n        componentDidUpdate(prevProps, prevState) {\n            if (this.props.configuration !== prevProps.configuration || this.props.page !== prevProps.page) {\n                this.destroy();\n                this.initialize(this.props.page === prevProps.page);\n            }\n            if (this.state.page !== prevState.page) {\n                this.forceUpdate(() => {\n                    var _a;\n                    return (_a = this.state.page) === null || _a === void 0 ? void 0 : _a.sync();\n                });\n            }\n        }\n        componentWillUnmount() {\n            this.destroy();\n        }\n        initialize(force = false) {\n            return __awaiter(this, void 0, void 0, (function*() {\n                const model = force ? undefined : this.props.page;\n                try {\n                    this.setState({\n                        page: model ? spaSdk.initialize(this.props.configuration, model) : yield spaSdk.initialize(this.props.configuration)\n                    });\n                } catch (error) {\n                    this.setState(() => {\n                        throw error;\n                    });\n                }\n            }));\n        }\n        destroy() {\n            if (!this.state.page) {\n                return;\n            }\n            spaSdk.destroy(this.state.page);\n        }\n        render() {\n            if (!this.state.page) {\n                return null;\n            }\n            return React.createElement(BrPageContext.Provider, {\n                value: this.state.page\n            }, React.createElement(BrMappingContext.Provider, {\n                value: this.props.mapping\n            }, React.createElement(BrNode, {\n                component: this.state.page.getComponent()\n            }, this.props.children)));\n        }\n    }\n    exports.BrComponent = BrComponent;\n    exports.BrComponentContext = BrComponentContext;\n    exports.BrManageContentButton = BrManageContentButton;\n    exports.BrManageMenuButton = BrManageMenuButton;\n    exports.BrPage = BrPage;\n    exports.BrPageContext = BrPageContext;\n    Object.defineProperty(exports, \"__esModule\", {\n        value: true\n    });\n}));\n//# sourceMappingURL=index.js.map\n"]},"metadata":{},"sourceType":"script"}